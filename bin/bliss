#!/usr/bin/env python
import sys
import os
import bliss
from bliss.config import static
from ptpython import repl
from ptpython.eventloop import _create_eventloop
from gevent import select

def gevent_inputhook(inputhook_context):
    r, _, _ = select.select([inputhook_context.fileno()],[],[])

def create_eventloop():
    return _create_eventloop(gevent_inputhook)

repl.create_eventloop = create_eventloop

user_ns = {"config": static.get_config(),
           "sys": sys,
           "os": os}

repl.embed(user_ns, None, vi_mode=False, history_filename=os.path.join(os.environ["HOME"], ".%s_history" % os.path.basename(sys.argv[0])))
