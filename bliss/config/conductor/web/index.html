<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
    <title>Beacon configuration application</title>

    <!-- JQuery -->
    <script language="JavaScript" type="text/javascript" src="js/jquery-2.1.3.min.js"></script>

    <!-- Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"></link>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <!-- Bootstrap select -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.3/js/bootstrap-select.min.js"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.3/css/bootstrap-select.min.css"></link>

    <!-- JQuery UI -->
    <!-- <script language="JavaScript" type="text/javascript" src="js/jquery-ui.min.js"></script> -->
    <!-- <link rel="stylesheet" href="css/jquery-ui/jquery-ui.min.css"></link> -->

    <!-- JQuery layout -->
    <!-- <script language="JavaScript" type="text/javascript" src="js/jquery.layout.min.js"></script> -->
    <!-- <link rel="stylesheet" href="css/layout-default.min.css"></link> -->

    <!-- jsTree -->
    <script language="JavaScript" type="text/javascript" src="js/jstree.min.js"></script>
    <link rel="stylesheet" href="css/jstree/style.min.css"></link>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.9/ace.js" ></script>

    <script src="js/config_app.js"></script>
    <link rel="stylesheet" href="css/config_app.css"></link>

  </head>
  <body>

    <!-- Main toolbar -->
    <nav class="navbar navbar-default navbar-compact" id="main_toolbar" aria-label="main toolbar">
      <div class="container-fluid">
        <div class="navbar-header">
          <!-- <a class="navbar-brand" href="#"><img alt="Beacon" src="res/logo.png" width="32" height="32"></img></a> -->
	  <a class="navbar-brand" href="#">Beacon</a>
        </div>

	<form class="navbar-form navbar-left" role="search">
          <div class="form-group">
            <input id="search_edit" type="text" class="form-control" placeholder="Search"></input>
          </div>
	  <button id="clear_search" type="button" class="btn btn-default">
	    Clear search
	    <span class="fa fa-eraser"></span>
	  </button>
	</form>

	<p id="message_box" role="alert" class="navbar-text alert"></p>

        <button type="button" class="btn btn-primary navbar-btn navbar-right" id="reload_config"
		data-loading-text="Reloading...">
          Reload config
          <span class="fa fa-refresh"></span>
        </button>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row row-eq-height">
	<!-- Tree panel (left panel) -->
	<div id="tree_panel" class="col-md-2">
	  <!-- Tree -->
	  <div id="tree" class="jstree"></div>
	</div>
	<div id="right_panel" class="col-md-10">
	  <!-- Edit panel (right panel) -->
	  <div id="edit_panel" class="" style="visibility:hidden">
	    <div id="edit_form" class="" style=""></div>
	  </div>
	</div>
      </div>
    </div>
    <script>
      $(function() {

        $('[data-toggle="tooltip"]').tooltip({'placement': 'top'});

        var tree = $("#tree")

        $("#search_edit").keyup(function() {
          var search = $(this).val();
          tree.jstree("search", search);
        });

        $("#clear_search").on("click", function() {
          $("#search_edit").val("");
          tree.jstree().clear_search();
        });

        tree_populate(tree);

        $("#reload_config").on("click", function() {
          var btn = $(this).button('loading');
          request = $.ajax({
            url : "config/reload",
            success: function() {
              tree.jstree("destroy");
              tree_populate(tree);
            }});
          request.always(function() {
            btn.button('reset');
          });
        });
      });
    </script>
  </body>
</html>
