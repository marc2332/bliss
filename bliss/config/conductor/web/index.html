<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
    <title>Beacon configuration application</title>

    <!-- JQuery -->
    <script language="JavaScript" type="text/javascript" src="js/jquery-2.1.3.min.js"></script>

    <!-- Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"></link>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <!-- Bootstrap table -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.8.1/bootstrap-table.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.8.1/bootstrap-table.min.js"></script>

    <!-- JQuery UI -->
    <!-- <script language="JavaScript" type="text/javascript" src="js/jquery-ui.min.js"></script> -->
    <!-- <link rel="stylesheet" href="css/jquery-ui/jquery-ui.min.css"></link> -->

    <!-- JQuery layout -->
    <!-- <script language="JavaScript" type="text/javascript" src="js/jquery.layout.min.js"></script> -->
    <!-- <link rel="stylesheet" href="css/layout-default.min.css"></link> -->

    <!-- jsTree -->
    <script language="JavaScript" type="text/javascript" src="js/jstree.min.js"></script>
    <link rel="stylesheet" href="css/jstree/style.min.css"></link>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.9/ace.js" ></script>

    <script src="js/config_app.js"></script>
    <link rel="stylesheet" href="css/config_app.css"></link>

    <style>
      <!-- compact bootstrap panels and forms -->
      .panel-body { padding: 4px; }
      .edit-form { padding: 4px; }
      .form-control { padding: 4px 4px; }
      .message-bar { margin-top:8px; margin-bottom: 8px; padding: 6px;}
      .navbar { margin-bottom: 6px; }
      .navbar-brand { padding: 6px; }
    </style>
  </head>
  <body>

    <!-- Main toolbar -->
    <div class="navbar navbar-default" id="main_toolbar" aria-label="main toolbar">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="#"><img alt="Beacon" src="res/logo.png" width="48"></img></a>
        </div>

	<form class="navbar-form navbar-left" role="search">
          <div class="form-group">
            <input id="search_edit" type="text" class="form-control" placeholder="Search"></input>
          </div>
	  <button id="clear_search" type="button" class="btn btn-default">
	    Clear search
	    <span class="fa fa-eraser"></span>
	  </button>
	</form>

        <button type="button" class="btn btn-primary navbar-btn navbar-right" id="reload_config"
		        data-loading-text="Reloading...">
          Reload config
          <span class="fa fa-refresh"></span>
        </button>
      </div>
    </div>

    <!-- Main content -->
    <div class="row">
      <!-- Tree panel (left panel) -->
      <div id="tree_panel" class="col-md-3" style="padding-right: 4px;">
	<!-- Tree toolbar -->
	<div class="panel panel-default">
	  <div class="panel-body" style="padding: 6px;">
	    <div class="btn-toolbar" role="toolbar" id="tree_toolbar" aria-label="tree toolbar">
	      <div class="btn-group" role="group" aria-label="item edition">
		<div class="btn-group" role="group">
		  <button type="button" class="btn btn-primary btn-sm dropdown-toggle" data-toggle="dropdown"
			  aria-haspopup="true" aria-expanded="false" id="add_item">
		    Add...
		    <span class="caret"></span>
		    <span class="fa fa-plus"></span>
		  </button>
		  <ul class="dropdown-menu">
		    <li><a href="#">Folder</a></li>
		    <li><a href="#">File</a></li>
		    <li><a href="#">Item</a></li>
		  </ul>
		</div>
		<button type="button" class="btn btn-primary btn-sm" id="delete_item">
		  Delete
		  <span class="fa fa-remove"></span>
		</button>
		<button type="button" class="btn btn-primary btn-sm" id="clone_item">
		  Clone
		  <span class="fa fa-copy"></span>
		</button>
	      </div>
	    </div>

	    <div style="height:10px;"></div>
	    <!-- Tree -->
	    <div id="tree" class="jstree jstree-1 jstree-default"></div>
	  </div>
	</div>
      </div>

      <!-- Edit panel (right panel) -->
      <div id="right_panel" class="col-md-9" style="padding-left: 4px;">
	<div id="edit_panel" class="" style="visibility:hidden">
	  <div id="edit_form" class="" style=""></div>
        </div>
      </div>
    </div>
    <div class="row">
      <div id="message_box" role="alert"
           class="alert"></div>
    </div>
    <script>
      $(function() {
        var tree = $("#tree")

        $("#search_edit").keyup(function() {
          var search = $(this).val();
          tree.jstree("search", search);
        });

        $("#clear_search").on("click", function() {
          $("#search_edit").val("");
          tree.jstree().clear_search();
        });

        tree_populate(tree);

        $("#reload_config").on("click", function() {
          var btn = $(this).button('loading');
          request = $.ajax({
            url : "config/reload",
            success: function() {
              tree.jstree("destroy");
              tree_populate(tree);
            }});
          request.always(function() {
            btn.button('reset');
          });
        });
      });
    </script>
  </body>
</html>
