<html>
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Beacon configuration application</title>
        <script language="JavaScript" type="text/javascript" src="js/jquery-2.1.3.min.js"></script>
        <script language="JavaScript" type="text/javascript" src="js/jquery-ui.min.js"></script>
        <script language="JavaScript" type="text/javascript" src="js/jquery.layout.min.js"></script>
        <script language="JavaScript" type="text/javascript" src="js/jstree.min.js"></script>

        <link rel="stylesheet" href="css/jquery-ui/jquery-ui.min.css"></link>
        <link rel="stylesheet" href="css/layout-default.min.css"></link>
        <link rel="stylesheet" href="css/jstree/style.min.css"></link>

	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"></link>
        <script src="js/config_app.js"></script>
  </head>
  <body>
    <div class="ui-layout-north">
       <div class="btn-group" role="group" aria-label="global manipulation">
	 <button type="button" class="btn btn-default" id="reload_config"  aria-label="reload config">
	   <span class="glyphicon glyphicon-refresh"></span>
	 </button>
       </div>
    </div>
    <div class="ui-layout-west">
      <div class="btn-group" role="group" aria-label="Item manipulation">
	<div class="btn-group" role="group">
	  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
		    aria-haspopup="true" aria-expanded="false" aria-label="add item" id="add_item">
	    <span class="glyphicon glyphicon-asterisk" aria-hidden="true"></span>
	    <span class="caret"></span>
	  </button>
	  <ul class="dropdown-menu" aria-labelledby="add_item">
	    <li><a href="#">Add object</a></li>
	    <li><a href="#">Add file</a></li>
	    <li><a href="#">Add folder</a></li>
	  </ul>
	</div>
	<button type="button" class="btn btn-default" id="clone_item"  aria-label="clone item">
	  <span class="glyphicon glyphicon-duplicate"></span>
	</button>
	<button type="button" class="btn btn-default" id="remove_item" aria-label="remove item">
	  <span class="glyphicon glyphicon-remove"></span>
	</button>
      </div>
      <div id="tree"></div>
    </div>
    <div class="ui-layout-center">
      <div id="edit_panel"></div>
    </div>
    <script>
      $(function() {
          $("body").layout({ applyDefaultStyles: false, west__size: '30%' });
          var tree = $("#tree")

          populate_tree(tree);

          tree.bind("select_node.jstree", function(ev, data) {
            var node_name = data.node.text;

            $.get("objects/"+node_name, function(data) {
              $("#edit_panel").empty();
              var form = $("<form></form>");
              $("#edit_panel").append(form);
              $.each(data, function(key, value) {
                var label = $("<label></label>");
                label.html(key);
                var input_field = $("<input></input>");
                input_field.attr("class", "form-control");
                input_field.attr("placeholder", key);
                input_field.attr("value", value);
                input_field.attr("type", "text");
                form.append(label);
                form.append(input_field);
                form.append("<br>");
              });
            }, "json");
         });
      });
    </script>
  </body>
</html>
